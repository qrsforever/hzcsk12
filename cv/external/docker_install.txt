wget -qO- https://get.docker.com/ | sh
sudo usermod -aG docker dc2-user
newgrp docker

curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | \
         sudo apt-key add -

distribution=$(. /etc/os-release;echo $ID$VERSION_ID)

curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | \
         sudo tee /etc/apt/sources.list.d/nvidia-docker.list
         sudo apt-get update

sudo apt-get install nvidia-docker2
sudo pkill -SIGHUP dockerd
sudo /etc/init.d/docker restart

# test nvidia-smi
docker image pull nvidia/cuda
docker run --runtime=nvidia --rm nvidia/cuda nvidia-smi

docker run -it --name cauchy \
           --runtime=nvidia --network=host --shm-size=2g \
           --ulimit memlock=-1 --ulimit stack=67108864 \
           -v /data:/data \ 
           colorai/cauchy_cv_visdom:v0.2.0

# python cauchy_services.py --port 8339

